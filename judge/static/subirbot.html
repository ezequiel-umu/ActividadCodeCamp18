<!DOCTYPE html>
<html>

<head>
  <title>CodeCamp18 - Login</title>
  <script src="/js/API.js"></script>
  <meta charset="utf-8" />

</head>

<body>
  <form method="post" onsubmit="botSubmit(event)">
    <input id="files" type="file" accept="application/gzip" />
    <select>
      <option value="C++">C++</option>
      <option value="Pascal">Pascal</option>
      <option value="Java">Java</option>
      <option value="Python">Python</option>
    </select>
    <input type="submit" />
  </form>
</body>
<script>
  function filesFromSelector(selector) {
    return document.querySelector(selector).files;
  }

  function botSubmit(ev) {
    ev.preventDefault();
    const files = filesFromSelector("#files");
    const selected = document.querySelector("option:checked");
    const kind = encodeURIComponent(selected.value);
    doPost("/api/bot?kind="+kind, files[0]).then((e) => {
      document.location = "/";
    }).catch((e) => {
      alert(e);
    });
  }
</script>

</html>